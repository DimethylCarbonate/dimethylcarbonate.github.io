---
layout:             post
title:              C++笔记：数组
subtitle:           批量数据处理
date:               2024-09-29
author:             Dimethyl
original:           true
header-style:       text
catalog:            true
tags:
    - C++
    - 计算机语言
    - SJTU
    - CS1501 程序设计思想与方法
    - 笔记
---

## 一维数组

### 定义

在数组的定义中，数组的元素个数必须是编译时的常量，即在程序中必须以常量或常量表达式的形式出现。

下面的语句是合法的：

```C++
#define LEN1 10
const int LEN2=5;
double a[LEN1],a[LEN2];
```
下面的语句是非法的；不过，这些语句在某些编译器中也会通过编译，因为编译器为这邪恶语句作出了特别优化，并不具有通用性：
```C++
int n=10;
double a[n];
```

### 初始化

在对数组赋值时总是按照从前向后的顺序，没有赋到初值的元素为0。因此，若想要将数组的元素全部赋0，可写成：
```C++
int a[10]={0};
```
同时，也可不给出数组的规模，而由编译器根据初值的规模来确定：
```C++
int a[]={0,1,2,3,4};
```
### 内存映像

编译器不会检查下标的合法性，不合法的下标可能会导致内存溢出，从而使得程序运行出现未知的结果。

### 一维数组作为函数参数

当一维数组作为函数参数时，形式参数和实际参数都是数组名。
```C++
int average(int array[10]);
```
数组传递的实质是首地址的传递，形式参数和实际参数是同一个数组。传递一个数组需要两个参数：数组名和数组大小。

因此，形式参数中数组的大小一般是无意义的，通常可以省略：
```C++
int average(int array[]);
```

## 查找

### 二分查找

对于一个已排序的数组，通过类似于二分法解方程的思路来查找对应的元素。
```C++
#include<bits/stdc++.h>
using namespace std;
int main(){
    int a[n];
    int low=0,high=n-1,mid;
    while(low<high){
        mid=(low+high)/2;
        if(flag==a[mid]){
            cout<<mid;
            break;
        }
        else if(flag<a[mid]){
            high=mid+1;
        }
        else{
            low=mid-1;
        }
    }
    return 0;
}
```
小规模数组，二分查找与顺序查找速度相差不大；大规模数组时二分查找远远快于顺序查找。

## 排序

### 选择排序

利用顺序查找进行排序。

### 冒泡排序

从头到尾比较相邻两个元素，如果前一个元素大于后一个，就将其交换顺序。当一轮比较结束时没有发生交换，则排序完成。
```C++
#include<bits/stdc++.h>
using namespace std;
int main(){
    int a[n];
    for(int i=0;i<=n-1;i++){
        int s=0,tmp;
        for(int j=0;j<=n-2-i;j++){
            if(a[j]>=[j+1]){
                tmp=a[j];
                a[j]=a[j+1];
                a[j+1]=tmp;
                s+=1;
            }
        }
        if(s!=0){
            break;
        }
    }
    for(int i=0;i<=n-1;i++){
        cout<<a[i]<<endl;
    }
    return 0;
}
```
## 二维数组

### 二维数组作为函数参数

二维数组第二个下标一定要指定，因为它是数组元素类型的一个部分。

二维数组的传递也是传递起始地址，所以形式参数和实际参数是同一个二维数组，作为函数参数时该函数不需要返回值（即`return`）。

## 字符串

由一系列字符组成的数据称为**字符串**。C++中的字符串常量是由双引号包围并由`\0`为结尾的一系列字符。字符串的处理方式有两种：C语言方式和C++中的`string`类。

### C语言中的字符串

C语言中没有字符串类型，而是通过字符数组来处理字符串。如：
```C
char ch[]={'1','2','3',',','4'};
char ch[]={"123,4"};
char ch[]="123,4";
```

空字符串是不含任何字符的字符串，通常用一个双引号表示。空字符串也占据了一个字节的空间，即`\0`。

> 在C++中`'a'`和`"a"`是不一样的。前一个是字符常量，占据1个字节，存放a的内码值；后一个是字符串，占据两个字节，存储`'a'`和`\0`。

#### 输入

1. 通过与一维数组相似的方法逐个输入；
2. 通过`cin`输入，不过无法输入空白字符且可能发生内存溢出；
3. 通过`get`或`getline`输入。

`get`和`getline`的用法示例：
```C++
cin.get(字符数组,数组长度,结束标记)；
cin.getline(字符数组,数组长度,结束标记)；
```
两个函数都是从键盘接收一个包含任意字符的字符串，直到遇到了指定的结束标记或到达了数组长度-1的位置，因为要为`\0`留下空间。

结束标记也可以不指定，默认将回车作为结束标记。

`get`和`getline`的区别在于对于结束字符的处理方式。`get`读取结束字符，但是将其留在输入缓冲区；`getline`则将其删除。

#### 处理与运算

字符串是以数组的形式存储的，并不是系统的内置类型，故不能用系统内部的运算符进行操作。

字符串的赋值和比较都是通过对相应的字符数组的元素进行操作。

两个字符串比较时，按照从左向右的顺序逐个比较元素的内码值。如：
```
"abc"="abc"
"abc">"abb"
"aa"<"aaa"
"abcd">"xyz"
```

#### 字符串作为函数参数

字符串作为函数参数，所传递的参数只有一个，即数组名。

### `string`类

`string`类位于名字空间`std`中，它隐藏了字符串的数组性质，使得程序能够像处理普通变量那样处理字符串。

`string`类与字符数组的主要区别在于其是简单变量而不是数组，不需要声明大小。同时，也可以直接将一个`string`对象赋值给另一个`string`对象，可以用`+`对象连接两个字符串。

如果想用`string`对象读取空格等空白字符时，可以：
```C++
getline(cin,string对象);
```

`string`类也可以作为函数参数，用法和内置函数一样，是值传递。